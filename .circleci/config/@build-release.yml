### ***
### WARNING: DO NOT manually EDIT or MERGE this file, it is generated by 'make .circleci/config/@build-release.yml'.
### INSTEAD: Edit or merge the source in packages-oss.lock/pkgs.yml .circleci/config/@build-release.yml.tpl then run 'make .circleci/config/@build-release.yml'.
### ***
# Current cache version: cache002

executors:
  releaser:
    docker:
      - image: circleci/buildpack-deps
    environment:
      PRODUCT_REVISION: ""
      AUTO_INSTALL_TOOLS: 'YES'
    shell: /usr/bin/env bash -euo pipefail -c

workflows:
  build-standalone:
    jobs:
      - cache-builder-images:
          filters:
            branches:
              only:
                - /build-.*/
                - /ci.*/
      - darwin_386_package: { requires: [ cache-builder-images ] }
      - darwin_amd64_package: { requires: [ cache-builder-images ] }
      - freebsd_386_package: { requires: [ cache-builder-images ] }
      - freebsd_amd64_package: { requires: [ cache-builder-images ] }
      - freebsd_arm_package: { requires: [ cache-builder-images ] }
      - linux_386_package: { requires: [ cache-builder-images ] }
      - linux_amd64_package: { requires: [ cache-builder-images ] }
      - linux_arm_package: { requires: [ cache-builder-images ] }
      - linux_arm64_package: { requires: [ cache-builder-images ] }
      - netbsd_386_package: { requires: [ cache-builder-images ] }
      - netbsd_amd64_package: { requires: [ cache-builder-images ] }
      - openbsd_386_package: { requires: [ cache-builder-images ] }
      - openbsd_amd64_package: { requires: [ cache-builder-images ] }
      - solaris_amd64_package: { requires: [ cache-builder-images ] }
      - windows_386_package: { requires: [ cache-builder-images ] }
      - windows_amd64_package: { requires: [ cache-builder-images ] }
      - bundle-releases:
          requires:
            - darwin_386_package
            - darwin_amd64_package
            - freebsd_386_package
            - freebsd_amd64_package
            - freebsd_arm_package
            - linux_386_package
            - linux_amd64_package
            - linux_arm_package
            - linux_arm64_package
            - netbsd_386_package
            - netbsd_amd64_package
            - openbsd_386_package
            - openbsd_amd64_package
            - solaris_amd64_package
            - windows_386_package
            - windows_amd64_package
jobs:
  cache-builder-images:
    executor: releaser
    steps:
      - setup_remote_docker
      - checkout
      - write-build-layer-cache-keys

      # Load best available cached image.
      - restore_cache:
          keys:
            - cache002-build-static-assets_789e_{{checksum ".buildcache/cache-keys/build-static-assets-789e53ff216ae925d44e9b5274bb7d805ba14aad"}}
            - cache002-build-ui_9d72_{{checksum ".buildcache/cache-keys/build-ui-9d726348bf94288702b8cd7b95d1c1691a0262db"}}
            - cache002-ui-dependencies_61c2_{{checksum ".buildcache/cache-keys/ui-dependencies-61c297802275b5ec73f8ea5eb856a4cdafa320d2"}}
            - cache002-install-yarn_b50a_{{checksum ".buildcache/cache-keys/install-yarn-b50a685dda6f0024fdc1d3c932145249388607ff"}}
            - cache002-set-workdir_832a_{{checksum ".buildcache/cache-keys/set-workdir-832ab6db015e60d34809bd961bef0600b57bc146"}}
            - cache002-install-go-tools_a227_{{checksum ".buildcache/cache-keys/install-go-tools-a22777d3f0b5a64a5813f3caf9e0f4573723f284"}}
            - cache002-install-go_e7d1_{{checksum ".buildcache/cache-keys/install-go-e7d10501046b915e20453987cea6c963e09ee189"}}
            - cache002-base_ab0c_{{checksum ".buildcache/cache-keys/base-ab0cae2c151b9aaa085c91b4da049ce7e8f9fbfc"}}
      - run:
          name: Finish early if loaded exact match from cache.
          command: |
            if [ -f .buildcache/archives/07-build-static-assets-789e53ff216ae925d44e9b5274bb7d805ba14aad.tar.gz ]; then
              echo "Exact match found in cache, skipping build."
              circleci-agent step halt
            else
              echo "No exact match found, proceeding with build."
            fi
      - run: LAYER_SPEC_ID=07-build-static-assets-789e53ff216ae925d44e9b5274bb7d805ba14aad make -C packages*.lock load-builder-cache

      # No exact match was found, so build each layer up to target type.
      - run: make -f packages*.lock/layer.mk 00-base-ab0cae2c151b9aaa085c91b4da049ce7e8f9fbfc-image
      - run: make -f packages*.lock/layer.mk 01-install-go-e7d10501046b915e20453987cea6c963e09ee189-image
      - run: make -f packages*.lock/layer.mk 02-install-go-tools-a22777d3f0b5a64a5813f3caf9e0f4573723f284-image
      - run: make -f packages*.lock/layer.mk 03-set-workdir-832ab6db015e60d34809bd961bef0600b57bc146-image
      - run: make -f packages*.lock/layer.mk 04-install-yarn-b50a685dda6f0024fdc1d3c932145249388607ff-image
      - run: make -f packages*.lock/layer.mk 05-ui-dependencies-61c297802275b5ec73f8ea5eb856a4cdafa320d2-image
      - run: make -f packages*.lock/layer.mk 06-build-ui-9d726348bf94288702b8cd7b95d1c1691a0262db-image
      - run: make -f packages*.lock/layer.mk 07-build-static-assets-789e53ff216ae925d44e9b5274bb7d805ba14aad-image

      # Save the target layer archive.
      
      - run: make -f packages*.lock/layer.mk 07-build-static-assets-789e53ff216ae925d44e9b5274bb7d805ba14aad-save
      
      # Store the target layer archive as all the relevant cache names.
      - save_cache:
          key: cache002-build-static-assets_789e_{{checksum ".buildcache/cache-keys/build-static-assets-789e53ff216ae925d44e9b5274bb7d805ba14aad"}}
          paths:
            - .buildcache/archives/07-build-static-assets-789e53ff216ae925d44e9b5274bb7d805ba14aad.tar.gz
      - run: mv .buildcache/archives/07-build-static-assets-789e53ff216ae925d44e9b5274bb7d805ba14aad.tar.gz .buildcache/archives/06-build-ui-9d726348bf94288702b8cd7b95d1c1691a0262db.tar.gz
      - save_cache:
          key: cache002-build-ui_9d72_{{checksum ".buildcache/cache-keys/build-ui-9d726348bf94288702b8cd7b95d1c1691a0262db"}}
          paths:
            - .buildcache/archives/06-build-ui-9d726348bf94288702b8cd7b95d1c1691a0262db.tar.gz
      - run: mv .buildcache/archives/06-build-ui-9d726348bf94288702b8cd7b95d1c1691a0262db.tar.gz .buildcache/archives/05-ui-dependencies-61c297802275b5ec73f8ea5eb856a4cdafa320d2.tar.gz
      - save_cache:
          key: cache002-ui-dependencies_61c2_{{checksum ".buildcache/cache-keys/ui-dependencies-61c297802275b5ec73f8ea5eb856a4cdafa320d2"}}
          paths:
            - .buildcache/archives/05-ui-dependencies-61c297802275b5ec73f8ea5eb856a4cdafa320d2.tar.gz
      - run: mv .buildcache/archives/05-ui-dependencies-61c297802275b5ec73f8ea5eb856a4cdafa320d2.tar.gz .buildcache/archives/04-install-yarn-b50a685dda6f0024fdc1d3c932145249388607ff.tar.gz
      - save_cache:
          key: cache002-install-yarn_b50a_{{checksum ".buildcache/cache-keys/install-yarn-b50a685dda6f0024fdc1d3c932145249388607ff"}}
          paths:
            - .buildcache/archives/04-install-yarn-b50a685dda6f0024fdc1d3c932145249388607ff.tar.gz
      - run: mv .buildcache/archives/04-install-yarn-b50a685dda6f0024fdc1d3c932145249388607ff.tar.gz .buildcache/archives/03-set-workdir-832ab6db015e60d34809bd961bef0600b57bc146.tar.gz
      - save_cache:
          key: cache002-set-workdir_832a_{{checksum ".buildcache/cache-keys/set-workdir-832ab6db015e60d34809bd961bef0600b57bc146"}}
          paths:
            - .buildcache/archives/03-set-workdir-832ab6db015e60d34809bd961bef0600b57bc146.tar.gz
      - run: mv .buildcache/archives/03-set-workdir-832ab6db015e60d34809bd961bef0600b57bc146.tar.gz .buildcache/archives/02-install-go-tools-a22777d3f0b5a64a5813f3caf9e0f4573723f284.tar.gz
      - save_cache:
          key: cache002-install-go-tools_a227_{{checksum ".buildcache/cache-keys/install-go-tools-a22777d3f0b5a64a5813f3caf9e0f4573723f284"}}
          paths:
            - .buildcache/archives/02-install-go-tools-a22777d3f0b5a64a5813f3caf9e0f4573723f284.tar.gz
      - run: mv .buildcache/archives/02-install-go-tools-a22777d3f0b5a64a5813f3caf9e0f4573723f284.tar.gz .buildcache/archives/01-install-go-e7d10501046b915e20453987cea6c963e09ee189.tar.gz
      - save_cache:
          key: cache002-install-go_e7d1_{{checksum ".buildcache/cache-keys/install-go-e7d10501046b915e20453987cea6c963e09ee189"}}
          paths:
            - .buildcache/archives/01-install-go-e7d10501046b915e20453987cea6c963e09ee189.tar.gz
      - run: mv .buildcache/archives/01-install-go-e7d10501046b915e20453987cea6c963e09ee189.tar.gz .buildcache/archives/00-base-ab0cae2c151b9aaa085c91b4da049ce7e8f9fbfc.tar.gz
      - save_cache:
          key: cache002-base_ab0c_{{checksum ".buildcache/cache-keys/base-ab0cae2c151b9aaa085c91b4da049ce7e8f9fbfc"}}
          paths:
            - .buildcache/archives/00-base-ab0cae2c151b9aaa085c91b4da049ce7e8f9fbfc.tar.gz
  darwin_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 0e7df7c9415da08a0e0636811984e735ab18639b
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-0e7df7c9415da08a0e0636811984e735ab18639b-{{checksum ".buildcache/cache-keys/package-0e7df7c9415da08a0e0636811984e735ab18639b"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_b37f_{{checksum ".buildcache/cache-keys/copy-source-b37f3b71471c6384dbf5f30a412e41f0335c6939"}}
          - cache002-warm-go-build-vendor-cache_2b86_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-2b86c817126dc73206c1c6c1209c6afde7e2f9f7"}}
          - cache002-build-static-assets_789e_{{checksum ".buildcache/cache-keys/build-static-assets-789e53ff216ae925d44e9b5274bb7d805ba14aad"}}
          - cache002-build-ui_9d72_{{checksum ".buildcache/cache-keys/build-ui-9d726348bf94288702b8cd7b95d1c1691a0262db"}}
          - cache002-ui-dependencies_61c2_{{checksum ".buildcache/cache-keys/ui-dependencies-61c297802275b5ec73f8ea5eb856a4cdafa320d2"}}
          - cache002-install-yarn_b50a_{{checksum ".buildcache/cache-keys/install-yarn-b50a685dda6f0024fdc1d3c932145249388607ff"}}
          - cache002-set-workdir_832a_{{checksum ".buildcache/cache-keys/set-workdir-832ab6db015e60d34809bd961bef0600b57bc146"}}
          - cache002-install-go-tools_a227_{{checksum ".buildcache/cache-keys/install-go-tools-a22777d3f0b5a64a5813f3caf9e0f4573723f284"}}
          - cache002-install-go_e7d1_{{checksum ".buildcache/cache-keys/install-go-e7d10501046b915e20453987cea6c963e09ee189"}}
          - cache002-base_ab0c_{{checksum ".buildcache/cache-keys/base-ab0cae2c151b9aaa085c91b4da049ce7e8f9fbfc"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-0e7df7c9415da08a0e0636811984e735ab18639b-{{checksum ".buildcache/cache-keys/package-0e7df7c9415da08a0e0636811984e735ab18639b"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-2b86c817126dc73206c1c6c1209c6afde7e2f9f7.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-2b86c817126dc73206c1c6c1209c6afde7e2f9f7-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_2b86_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-2b86c817126dc73206c1c6c1209c6afde7e2f9f7"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-2b86c817126dc73206c1c6c1209c6afde7e2f9f7.tar.gz

  darwin_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 8e5ad3f1624a113a1e6c79f0db6ca072deec90a5
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-8e5ad3f1624a113a1e6c79f0db6ca072deec90a5-{{checksum ".buildcache/cache-keys/package-8e5ad3f1624a113a1e6c79f0db6ca072deec90a5"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_4ae5_{{checksum ".buildcache/cache-keys/copy-source-4ae55f6529314222551e17b4854f11d5c31f57ba"}}
          - cache002-warm-go-build-vendor-cache_d947_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-d9477f5372b70a30af6a496050762a6db84f8af4"}}
          - cache002-build-static-assets_789e_{{checksum ".buildcache/cache-keys/build-static-assets-789e53ff216ae925d44e9b5274bb7d805ba14aad"}}
          - cache002-build-ui_9d72_{{checksum ".buildcache/cache-keys/build-ui-9d726348bf94288702b8cd7b95d1c1691a0262db"}}
          - cache002-ui-dependencies_61c2_{{checksum ".buildcache/cache-keys/ui-dependencies-61c297802275b5ec73f8ea5eb856a4cdafa320d2"}}
          - cache002-install-yarn_b50a_{{checksum ".buildcache/cache-keys/install-yarn-b50a685dda6f0024fdc1d3c932145249388607ff"}}
          - cache002-set-workdir_832a_{{checksum ".buildcache/cache-keys/set-workdir-832ab6db015e60d34809bd961bef0600b57bc146"}}
          - cache002-install-go-tools_a227_{{checksum ".buildcache/cache-keys/install-go-tools-a22777d3f0b5a64a5813f3caf9e0f4573723f284"}}
          - cache002-install-go_e7d1_{{checksum ".buildcache/cache-keys/install-go-e7d10501046b915e20453987cea6c963e09ee189"}}
          - cache002-base_ab0c_{{checksum ".buildcache/cache-keys/base-ab0cae2c151b9aaa085c91b4da049ce7e8f9fbfc"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-8e5ad3f1624a113a1e6c79f0db6ca072deec90a5-{{checksum ".buildcache/cache-keys/package-8e5ad3f1624a113a1e6c79f0db6ca072deec90a5"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-d9477f5372b70a30af6a496050762a6db84f8af4.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-d9477f5372b70a30af6a496050762a6db84f8af4-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_d947_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-d9477f5372b70a30af6a496050762a6db84f8af4"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-d9477f5372b70a30af6a496050762a6db84f8af4.tar.gz

  freebsd_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: d5ae261dbd8314d64f1d032aff64d2853b330080
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-d5ae261dbd8314d64f1d032aff64d2853b330080-{{checksum ".buildcache/cache-keys/package-d5ae261dbd8314d64f1d032aff64d2853b330080"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_959a_{{checksum ".buildcache/cache-keys/copy-source-959a60ace7b907e21405e09ba5a43f69300364f2"}}
          - cache002-warm-go-build-vendor-cache_ed41_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-ed41ff2cf73712f279bcc3ac7a9b303376b574a2"}}
          - cache002-build-static-assets_789e_{{checksum ".buildcache/cache-keys/build-static-assets-789e53ff216ae925d44e9b5274bb7d805ba14aad"}}
          - cache002-build-ui_9d72_{{checksum ".buildcache/cache-keys/build-ui-9d726348bf94288702b8cd7b95d1c1691a0262db"}}
          - cache002-ui-dependencies_61c2_{{checksum ".buildcache/cache-keys/ui-dependencies-61c297802275b5ec73f8ea5eb856a4cdafa320d2"}}
          - cache002-install-yarn_b50a_{{checksum ".buildcache/cache-keys/install-yarn-b50a685dda6f0024fdc1d3c932145249388607ff"}}
          - cache002-set-workdir_832a_{{checksum ".buildcache/cache-keys/set-workdir-832ab6db015e60d34809bd961bef0600b57bc146"}}
          - cache002-install-go-tools_a227_{{checksum ".buildcache/cache-keys/install-go-tools-a22777d3f0b5a64a5813f3caf9e0f4573723f284"}}
          - cache002-install-go_e7d1_{{checksum ".buildcache/cache-keys/install-go-e7d10501046b915e20453987cea6c963e09ee189"}}
          - cache002-base_ab0c_{{checksum ".buildcache/cache-keys/base-ab0cae2c151b9aaa085c91b4da049ce7e8f9fbfc"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-d5ae261dbd8314d64f1d032aff64d2853b330080-{{checksum ".buildcache/cache-keys/package-d5ae261dbd8314d64f1d032aff64d2853b330080"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-ed41ff2cf73712f279bcc3ac7a9b303376b574a2.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-ed41ff2cf73712f279bcc3ac7a9b303376b574a2-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_ed41_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-ed41ff2cf73712f279bcc3ac7a9b303376b574a2"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-ed41ff2cf73712f279bcc3ac7a9b303376b574a2.tar.gz

  freebsd_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: f755a2a6236aed91360d154c3364bd48d82fe0c9
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-f755a2a6236aed91360d154c3364bd48d82fe0c9-{{checksum ".buildcache/cache-keys/package-f755a2a6236aed91360d154c3364bd48d82fe0c9"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_b387_{{checksum ".buildcache/cache-keys/copy-source-b387e24f8e74212645c9887db94ce884be9fe09e"}}
          - cache002-warm-go-build-vendor-cache_ad64_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-ad646a026a913575a8e46d73b81250382599af28"}}
          - cache002-build-static-assets_789e_{{checksum ".buildcache/cache-keys/build-static-assets-789e53ff216ae925d44e9b5274bb7d805ba14aad"}}
          - cache002-build-ui_9d72_{{checksum ".buildcache/cache-keys/build-ui-9d726348bf94288702b8cd7b95d1c1691a0262db"}}
          - cache002-ui-dependencies_61c2_{{checksum ".buildcache/cache-keys/ui-dependencies-61c297802275b5ec73f8ea5eb856a4cdafa320d2"}}
          - cache002-install-yarn_b50a_{{checksum ".buildcache/cache-keys/install-yarn-b50a685dda6f0024fdc1d3c932145249388607ff"}}
          - cache002-set-workdir_832a_{{checksum ".buildcache/cache-keys/set-workdir-832ab6db015e60d34809bd961bef0600b57bc146"}}
          - cache002-install-go-tools_a227_{{checksum ".buildcache/cache-keys/install-go-tools-a22777d3f0b5a64a5813f3caf9e0f4573723f284"}}
          - cache002-install-go_e7d1_{{checksum ".buildcache/cache-keys/install-go-e7d10501046b915e20453987cea6c963e09ee189"}}
          - cache002-base_ab0c_{{checksum ".buildcache/cache-keys/base-ab0cae2c151b9aaa085c91b4da049ce7e8f9fbfc"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-f755a2a6236aed91360d154c3364bd48d82fe0c9-{{checksum ".buildcache/cache-keys/package-f755a2a6236aed91360d154c3364bd48d82fe0c9"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-ad646a026a913575a8e46d73b81250382599af28.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-ad646a026a913575a8e46d73b81250382599af28-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_ad64_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-ad646a026a913575a8e46d73b81250382599af28"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-ad646a026a913575a8e46d73b81250382599af28.tar.gz

  freebsd_arm_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 31a0414980806ba9aa2b4f8c7f5fafca80424a95
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-31a0414980806ba9aa2b4f8c7f5fafca80424a95-{{checksum ".buildcache/cache-keys/package-31a0414980806ba9aa2b4f8c7f5fafca80424a95"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_375c_{{checksum ".buildcache/cache-keys/copy-source-375c266efca726da855fe5d1a75dde9104ceb686"}}
          - cache002-warm-go-build-vendor-cache_d4a5_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-d4a526ba23c5f0b9fe52ff037227bf14f0ee6df4"}}
          - cache002-build-static-assets_789e_{{checksum ".buildcache/cache-keys/build-static-assets-789e53ff216ae925d44e9b5274bb7d805ba14aad"}}
          - cache002-build-ui_9d72_{{checksum ".buildcache/cache-keys/build-ui-9d726348bf94288702b8cd7b95d1c1691a0262db"}}
          - cache002-ui-dependencies_61c2_{{checksum ".buildcache/cache-keys/ui-dependencies-61c297802275b5ec73f8ea5eb856a4cdafa320d2"}}
          - cache002-install-yarn_b50a_{{checksum ".buildcache/cache-keys/install-yarn-b50a685dda6f0024fdc1d3c932145249388607ff"}}
          - cache002-set-workdir_832a_{{checksum ".buildcache/cache-keys/set-workdir-832ab6db015e60d34809bd961bef0600b57bc146"}}
          - cache002-install-go-tools_a227_{{checksum ".buildcache/cache-keys/install-go-tools-a22777d3f0b5a64a5813f3caf9e0f4573723f284"}}
          - cache002-install-go_e7d1_{{checksum ".buildcache/cache-keys/install-go-e7d10501046b915e20453987cea6c963e09ee189"}}
          - cache002-base_ab0c_{{checksum ".buildcache/cache-keys/base-ab0cae2c151b9aaa085c91b4da049ce7e8f9fbfc"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-31a0414980806ba9aa2b4f8c7f5fafca80424a95-{{checksum ".buildcache/cache-keys/package-31a0414980806ba9aa2b4f8c7f5fafca80424a95"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-d4a526ba23c5f0b9fe52ff037227bf14f0ee6df4.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-d4a526ba23c5f0b9fe52ff037227bf14f0ee6df4-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_d4a5_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-d4a526ba23c5f0b9fe52ff037227bf14f0ee6df4"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-d4a526ba23c5f0b9fe52ff037227bf14f0ee6df4.tar.gz

  linux_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: ab3b406eb95366c4c31d23d114c4b7a2d5255ebb
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-ab3b406eb95366c4c31d23d114c4b7a2d5255ebb-{{checksum ".buildcache/cache-keys/package-ab3b406eb95366c4c31d23d114c4b7a2d5255ebb"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_d293_{{checksum ".buildcache/cache-keys/copy-source-d2932592975be96ed66136dcf94243576d7dd399"}}
          - cache002-warm-go-build-vendor-cache_e598_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-e5983532ab254093ad8be2d5aa12a3607a912a10"}}
          - cache002-build-static-assets_789e_{{checksum ".buildcache/cache-keys/build-static-assets-789e53ff216ae925d44e9b5274bb7d805ba14aad"}}
          - cache002-build-ui_9d72_{{checksum ".buildcache/cache-keys/build-ui-9d726348bf94288702b8cd7b95d1c1691a0262db"}}
          - cache002-ui-dependencies_61c2_{{checksum ".buildcache/cache-keys/ui-dependencies-61c297802275b5ec73f8ea5eb856a4cdafa320d2"}}
          - cache002-install-yarn_b50a_{{checksum ".buildcache/cache-keys/install-yarn-b50a685dda6f0024fdc1d3c932145249388607ff"}}
          - cache002-set-workdir_832a_{{checksum ".buildcache/cache-keys/set-workdir-832ab6db015e60d34809bd961bef0600b57bc146"}}
          - cache002-install-go-tools_a227_{{checksum ".buildcache/cache-keys/install-go-tools-a22777d3f0b5a64a5813f3caf9e0f4573723f284"}}
          - cache002-install-go_e7d1_{{checksum ".buildcache/cache-keys/install-go-e7d10501046b915e20453987cea6c963e09ee189"}}
          - cache002-base_ab0c_{{checksum ".buildcache/cache-keys/base-ab0cae2c151b9aaa085c91b4da049ce7e8f9fbfc"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-ab3b406eb95366c4c31d23d114c4b7a2d5255ebb-{{checksum ".buildcache/cache-keys/package-ab3b406eb95366c4c31d23d114c4b7a2d5255ebb"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-e5983532ab254093ad8be2d5aa12a3607a912a10.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-e5983532ab254093ad8be2d5aa12a3607a912a10-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_e598_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-e5983532ab254093ad8be2d5aa12a3607a912a10"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-e5983532ab254093ad8be2d5aa12a3607a912a10.tar.gz

  linux_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: f607d155348098f48a428e52b8452e15dacc56a5
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-f607d155348098f48a428e52b8452e15dacc56a5-{{checksum ".buildcache/cache-keys/package-f607d155348098f48a428e52b8452e15dacc56a5"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_4c02_{{checksum ".buildcache/cache-keys/copy-source-4c026de343d9498b8c076ee38da8d72ec0f08332"}}
          - cache002-warm-go-build-vendor-cache_7d4a_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-7d4a62f409a542be82d8b112a79635d35b95ffc8"}}
          - cache002-build-static-assets_789e_{{checksum ".buildcache/cache-keys/build-static-assets-789e53ff216ae925d44e9b5274bb7d805ba14aad"}}
          - cache002-build-ui_9d72_{{checksum ".buildcache/cache-keys/build-ui-9d726348bf94288702b8cd7b95d1c1691a0262db"}}
          - cache002-ui-dependencies_61c2_{{checksum ".buildcache/cache-keys/ui-dependencies-61c297802275b5ec73f8ea5eb856a4cdafa320d2"}}
          - cache002-install-yarn_b50a_{{checksum ".buildcache/cache-keys/install-yarn-b50a685dda6f0024fdc1d3c932145249388607ff"}}
          - cache002-set-workdir_832a_{{checksum ".buildcache/cache-keys/set-workdir-832ab6db015e60d34809bd961bef0600b57bc146"}}
          - cache002-install-go-tools_a227_{{checksum ".buildcache/cache-keys/install-go-tools-a22777d3f0b5a64a5813f3caf9e0f4573723f284"}}
          - cache002-install-go_e7d1_{{checksum ".buildcache/cache-keys/install-go-e7d10501046b915e20453987cea6c963e09ee189"}}
          - cache002-base_ab0c_{{checksum ".buildcache/cache-keys/base-ab0cae2c151b9aaa085c91b4da049ce7e8f9fbfc"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-f607d155348098f48a428e52b8452e15dacc56a5-{{checksum ".buildcache/cache-keys/package-f607d155348098f48a428e52b8452e15dacc56a5"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-7d4a62f409a542be82d8b112a79635d35b95ffc8.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-7d4a62f409a542be82d8b112a79635d35b95ffc8-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_7d4a_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-7d4a62f409a542be82d8b112a79635d35b95ffc8"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-7d4a62f409a542be82d8b112a79635d35b95ffc8.tar.gz

  linux_arm_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 55f686b7c66da028a38fafe00354eb57563614e0
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-55f686b7c66da028a38fafe00354eb57563614e0-{{checksum ".buildcache/cache-keys/package-55f686b7c66da028a38fafe00354eb57563614e0"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_2cc3_{{checksum ".buildcache/cache-keys/copy-source-2cc38f5bdba1028d145032ad2bae09fd5d78e459"}}
          - cache002-warm-go-build-vendor-cache_985b_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-985b873dd7ace11fec4d441db821baa64393b737"}}
          - cache002-build-static-assets_789e_{{checksum ".buildcache/cache-keys/build-static-assets-789e53ff216ae925d44e9b5274bb7d805ba14aad"}}
          - cache002-build-ui_9d72_{{checksum ".buildcache/cache-keys/build-ui-9d726348bf94288702b8cd7b95d1c1691a0262db"}}
          - cache002-ui-dependencies_61c2_{{checksum ".buildcache/cache-keys/ui-dependencies-61c297802275b5ec73f8ea5eb856a4cdafa320d2"}}
          - cache002-install-yarn_b50a_{{checksum ".buildcache/cache-keys/install-yarn-b50a685dda6f0024fdc1d3c932145249388607ff"}}
          - cache002-set-workdir_832a_{{checksum ".buildcache/cache-keys/set-workdir-832ab6db015e60d34809bd961bef0600b57bc146"}}
          - cache002-install-go-tools_a227_{{checksum ".buildcache/cache-keys/install-go-tools-a22777d3f0b5a64a5813f3caf9e0f4573723f284"}}
          - cache002-install-go_e7d1_{{checksum ".buildcache/cache-keys/install-go-e7d10501046b915e20453987cea6c963e09ee189"}}
          - cache002-base_ab0c_{{checksum ".buildcache/cache-keys/base-ab0cae2c151b9aaa085c91b4da049ce7e8f9fbfc"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-55f686b7c66da028a38fafe00354eb57563614e0-{{checksum ".buildcache/cache-keys/package-55f686b7c66da028a38fafe00354eb57563614e0"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-985b873dd7ace11fec4d441db821baa64393b737.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-985b873dd7ace11fec4d441db821baa64393b737-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_985b_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-985b873dd7ace11fec4d441db821baa64393b737"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-985b873dd7ace11fec4d441db821baa64393b737.tar.gz

  linux_arm64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 9b548487cd3c87aac7d9e0fdc08e7fc710ddfd45
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-9b548487cd3c87aac7d9e0fdc08e7fc710ddfd45-{{checksum ".buildcache/cache-keys/package-9b548487cd3c87aac7d9e0fdc08e7fc710ddfd45"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_3b90_{{checksum ".buildcache/cache-keys/copy-source-3b909c071052c968e676765382cf70d5516a7b69"}}
          - cache002-warm-go-build-vendor-cache_e496_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-e4965ded0cb33b45f4aa1ef6e5313ecff0be0db3"}}
          - cache002-build-static-assets_789e_{{checksum ".buildcache/cache-keys/build-static-assets-789e53ff216ae925d44e9b5274bb7d805ba14aad"}}
          - cache002-build-ui_9d72_{{checksum ".buildcache/cache-keys/build-ui-9d726348bf94288702b8cd7b95d1c1691a0262db"}}
          - cache002-ui-dependencies_61c2_{{checksum ".buildcache/cache-keys/ui-dependencies-61c297802275b5ec73f8ea5eb856a4cdafa320d2"}}
          - cache002-install-yarn_b50a_{{checksum ".buildcache/cache-keys/install-yarn-b50a685dda6f0024fdc1d3c932145249388607ff"}}
          - cache002-set-workdir_832a_{{checksum ".buildcache/cache-keys/set-workdir-832ab6db015e60d34809bd961bef0600b57bc146"}}
          - cache002-install-go-tools_a227_{{checksum ".buildcache/cache-keys/install-go-tools-a22777d3f0b5a64a5813f3caf9e0f4573723f284"}}
          - cache002-install-go_e7d1_{{checksum ".buildcache/cache-keys/install-go-e7d10501046b915e20453987cea6c963e09ee189"}}
          - cache002-base_ab0c_{{checksum ".buildcache/cache-keys/base-ab0cae2c151b9aaa085c91b4da049ce7e8f9fbfc"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-9b548487cd3c87aac7d9e0fdc08e7fc710ddfd45-{{checksum ".buildcache/cache-keys/package-9b548487cd3c87aac7d9e0fdc08e7fc710ddfd45"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-e4965ded0cb33b45f4aa1ef6e5313ecff0be0db3.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-e4965ded0cb33b45f4aa1ef6e5313ecff0be0db3-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_e496_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-e4965ded0cb33b45f4aa1ef6e5313ecff0be0db3"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-e4965ded0cb33b45f4aa1ef6e5313ecff0be0db3.tar.gz

  netbsd_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 3deea94b77c38d6a9ac72eee8de3eca79c4d9f92
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-3deea94b77c38d6a9ac72eee8de3eca79c4d9f92-{{checksum ".buildcache/cache-keys/package-3deea94b77c38d6a9ac72eee8de3eca79c4d9f92"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_3dfa_{{checksum ".buildcache/cache-keys/copy-source-3dfa4aa92385f5a5fb63679ad2488eed6424b04e"}}
          - cache002-warm-go-build-vendor-cache_f633_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-f6336a2058aa280bf4a9e1bd07449e622af89713"}}
          - cache002-build-static-assets_789e_{{checksum ".buildcache/cache-keys/build-static-assets-789e53ff216ae925d44e9b5274bb7d805ba14aad"}}
          - cache002-build-ui_9d72_{{checksum ".buildcache/cache-keys/build-ui-9d726348bf94288702b8cd7b95d1c1691a0262db"}}
          - cache002-ui-dependencies_61c2_{{checksum ".buildcache/cache-keys/ui-dependencies-61c297802275b5ec73f8ea5eb856a4cdafa320d2"}}
          - cache002-install-yarn_b50a_{{checksum ".buildcache/cache-keys/install-yarn-b50a685dda6f0024fdc1d3c932145249388607ff"}}
          - cache002-set-workdir_832a_{{checksum ".buildcache/cache-keys/set-workdir-832ab6db015e60d34809bd961bef0600b57bc146"}}
          - cache002-install-go-tools_a227_{{checksum ".buildcache/cache-keys/install-go-tools-a22777d3f0b5a64a5813f3caf9e0f4573723f284"}}
          - cache002-install-go_e7d1_{{checksum ".buildcache/cache-keys/install-go-e7d10501046b915e20453987cea6c963e09ee189"}}
          - cache002-base_ab0c_{{checksum ".buildcache/cache-keys/base-ab0cae2c151b9aaa085c91b4da049ce7e8f9fbfc"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-3deea94b77c38d6a9ac72eee8de3eca79c4d9f92-{{checksum ".buildcache/cache-keys/package-3deea94b77c38d6a9ac72eee8de3eca79c4d9f92"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-f6336a2058aa280bf4a9e1bd07449e622af89713.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-f6336a2058aa280bf4a9e1bd07449e622af89713-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_f633_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-f6336a2058aa280bf4a9e1bd07449e622af89713"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-f6336a2058aa280bf4a9e1bd07449e622af89713.tar.gz

  netbsd_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 4f4fecfe8a68b73376e6c9853606c1118135cd60
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-4f4fecfe8a68b73376e6c9853606c1118135cd60-{{checksum ".buildcache/cache-keys/package-4f4fecfe8a68b73376e6c9853606c1118135cd60"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_b2ef_{{checksum ".buildcache/cache-keys/copy-source-b2ef4d2da6288779d208d236f46b27fcc0657890"}}
          - cache002-warm-go-build-vendor-cache_ead0_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-ead0cacaa59bde0ac8d2b0aec32f6f0253ae311a"}}
          - cache002-build-static-assets_789e_{{checksum ".buildcache/cache-keys/build-static-assets-789e53ff216ae925d44e9b5274bb7d805ba14aad"}}
          - cache002-build-ui_9d72_{{checksum ".buildcache/cache-keys/build-ui-9d726348bf94288702b8cd7b95d1c1691a0262db"}}
          - cache002-ui-dependencies_61c2_{{checksum ".buildcache/cache-keys/ui-dependencies-61c297802275b5ec73f8ea5eb856a4cdafa320d2"}}
          - cache002-install-yarn_b50a_{{checksum ".buildcache/cache-keys/install-yarn-b50a685dda6f0024fdc1d3c932145249388607ff"}}
          - cache002-set-workdir_832a_{{checksum ".buildcache/cache-keys/set-workdir-832ab6db015e60d34809bd961bef0600b57bc146"}}
          - cache002-install-go-tools_a227_{{checksum ".buildcache/cache-keys/install-go-tools-a22777d3f0b5a64a5813f3caf9e0f4573723f284"}}
          - cache002-install-go_e7d1_{{checksum ".buildcache/cache-keys/install-go-e7d10501046b915e20453987cea6c963e09ee189"}}
          - cache002-base_ab0c_{{checksum ".buildcache/cache-keys/base-ab0cae2c151b9aaa085c91b4da049ce7e8f9fbfc"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-4f4fecfe8a68b73376e6c9853606c1118135cd60-{{checksum ".buildcache/cache-keys/package-4f4fecfe8a68b73376e6c9853606c1118135cd60"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-ead0cacaa59bde0ac8d2b0aec32f6f0253ae311a.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-ead0cacaa59bde0ac8d2b0aec32f6f0253ae311a-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_ead0_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-ead0cacaa59bde0ac8d2b0aec32f6f0253ae311a"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-ead0cacaa59bde0ac8d2b0aec32f6f0253ae311a.tar.gz

  openbsd_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: dd3806d8cd7ec77fc9a2c29c9a59ea82537a05d2
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-dd3806d8cd7ec77fc9a2c29c9a59ea82537a05d2-{{checksum ".buildcache/cache-keys/package-dd3806d8cd7ec77fc9a2c29c9a59ea82537a05d2"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_9d6e_{{checksum ".buildcache/cache-keys/copy-source-9d6e6576805e4c704c27796034357ee10a9a3ecc"}}
          - cache002-warm-go-build-vendor-cache_22a0_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-22a06fcd659de93ba728683d24b2d3af0bc8acb7"}}
          - cache002-build-static-assets_789e_{{checksum ".buildcache/cache-keys/build-static-assets-789e53ff216ae925d44e9b5274bb7d805ba14aad"}}
          - cache002-build-ui_9d72_{{checksum ".buildcache/cache-keys/build-ui-9d726348bf94288702b8cd7b95d1c1691a0262db"}}
          - cache002-ui-dependencies_61c2_{{checksum ".buildcache/cache-keys/ui-dependencies-61c297802275b5ec73f8ea5eb856a4cdafa320d2"}}
          - cache002-install-yarn_b50a_{{checksum ".buildcache/cache-keys/install-yarn-b50a685dda6f0024fdc1d3c932145249388607ff"}}
          - cache002-set-workdir_832a_{{checksum ".buildcache/cache-keys/set-workdir-832ab6db015e60d34809bd961bef0600b57bc146"}}
          - cache002-install-go-tools_a227_{{checksum ".buildcache/cache-keys/install-go-tools-a22777d3f0b5a64a5813f3caf9e0f4573723f284"}}
          - cache002-install-go_e7d1_{{checksum ".buildcache/cache-keys/install-go-e7d10501046b915e20453987cea6c963e09ee189"}}
          - cache002-base_ab0c_{{checksum ".buildcache/cache-keys/base-ab0cae2c151b9aaa085c91b4da049ce7e8f9fbfc"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-dd3806d8cd7ec77fc9a2c29c9a59ea82537a05d2-{{checksum ".buildcache/cache-keys/package-dd3806d8cd7ec77fc9a2c29c9a59ea82537a05d2"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-22a06fcd659de93ba728683d24b2d3af0bc8acb7.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-22a06fcd659de93ba728683d24b2d3af0bc8acb7-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_22a0_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-22a06fcd659de93ba728683d24b2d3af0bc8acb7"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-22a06fcd659de93ba728683d24b2d3af0bc8acb7.tar.gz

  openbsd_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: ea8ce018d2eef1660313b10d96ce099e01846630
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-ea8ce018d2eef1660313b10d96ce099e01846630-{{checksum ".buildcache/cache-keys/package-ea8ce018d2eef1660313b10d96ce099e01846630"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_8cbd_{{checksum ".buildcache/cache-keys/copy-source-8cbd62dc10efb6d4fa7afdebfcf9a73ff2e1cd2f"}}
          - cache002-warm-go-build-vendor-cache_3623_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-36236b13df719292a4ce17a73529ecc3466a600a"}}
          - cache002-build-static-assets_789e_{{checksum ".buildcache/cache-keys/build-static-assets-789e53ff216ae925d44e9b5274bb7d805ba14aad"}}
          - cache002-build-ui_9d72_{{checksum ".buildcache/cache-keys/build-ui-9d726348bf94288702b8cd7b95d1c1691a0262db"}}
          - cache002-ui-dependencies_61c2_{{checksum ".buildcache/cache-keys/ui-dependencies-61c297802275b5ec73f8ea5eb856a4cdafa320d2"}}
          - cache002-install-yarn_b50a_{{checksum ".buildcache/cache-keys/install-yarn-b50a685dda6f0024fdc1d3c932145249388607ff"}}
          - cache002-set-workdir_832a_{{checksum ".buildcache/cache-keys/set-workdir-832ab6db015e60d34809bd961bef0600b57bc146"}}
          - cache002-install-go-tools_a227_{{checksum ".buildcache/cache-keys/install-go-tools-a22777d3f0b5a64a5813f3caf9e0f4573723f284"}}
          - cache002-install-go_e7d1_{{checksum ".buildcache/cache-keys/install-go-e7d10501046b915e20453987cea6c963e09ee189"}}
          - cache002-base_ab0c_{{checksum ".buildcache/cache-keys/base-ab0cae2c151b9aaa085c91b4da049ce7e8f9fbfc"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-ea8ce018d2eef1660313b10d96ce099e01846630-{{checksum ".buildcache/cache-keys/package-ea8ce018d2eef1660313b10d96ce099e01846630"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-36236b13df719292a4ce17a73529ecc3466a600a.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-36236b13df719292a4ce17a73529ecc3466a600a-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_3623_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-36236b13df719292a4ce17a73529ecc3466a600a"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-36236b13df719292a4ce17a73529ecc3466a600a.tar.gz

  solaris_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 8e2e38d11073cf97fb9a1e393ac44d7f461b411f
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-8e2e38d11073cf97fb9a1e393ac44d7f461b411f-{{checksum ".buildcache/cache-keys/package-8e2e38d11073cf97fb9a1e393ac44d7f461b411f"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_6001_{{checksum ".buildcache/cache-keys/copy-source-600171d2c8f467377c1d21e1f2cc6f547cb88d56"}}
          - cache002-warm-go-build-vendor-cache_3dc7_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-3dc7e7199f927c7b838ac075b80319b7cc657bab"}}
          - cache002-build-static-assets_789e_{{checksum ".buildcache/cache-keys/build-static-assets-789e53ff216ae925d44e9b5274bb7d805ba14aad"}}
          - cache002-build-ui_9d72_{{checksum ".buildcache/cache-keys/build-ui-9d726348bf94288702b8cd7b95d1c1691a0262db"}}
          - cache002-ui-dependencies_61c2_{{checksum ".buildcache/cache-keys/ui-dependencies-61c297802275b5ec73f8ea5eb856a4cdafa320d2"}}
          - cache002-install-yarn_b50a_{{checksum ".buildcache/cache-keys/install-yarn-b50a685dda6f0024fdc1d3c932145249388607ff"}}
          - cache002-set-workdir_832a_{{checksum ".buildcache/cache-keys/set-workdir-832ab6db015e60d34809bd961bef0600b57bc146"}}
          - cache002-install-go-tools_a227_{{checksum ".buildcache/cache-keys/install-go-tools-a22777d3f0b5a64a5813f3caf9e0f4573723f284"}}
          - cache002-install-go_e7d1_{{checksum ".buildcache/cache-keys/install-go-e7d10501046b915e20453987cea6c963e09ee189"}}
          - cache002-base_ab0c_{{checksum ".buildcache/cache-keys/base-ab0cae2c151b9aaa085c91b4da049ce7e8f9fbfc"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-8e2e38d11073cf97fb9a1e393ac44d7f461b411f-{{checksum ".buildcache/cache-keys/package-8e2e38d11073cf97fb9a1e393ac44d7f461b411f"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-3dc7e7199f927c7b838ac075b80319b7cc657bab.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-3dc7e7199f927c7b838ac075b80319b7cc657bab-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_3dc7_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-3dc7e7199f927c7b838ac075b80319b7cc657bab"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-3dc7e7199f927c7b838ac075b80319b7cc657bab.tar.gz

  windows_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: ac93fcf961f9c7a47b51e95e2180c3472e9079e8
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-ac93fcf961f9c7a47b51e95e2180c3472e9079e8-{{checksum ".buildcache/cache-keys/package-ac93fcf961f9c7a47b51e95e2180c3472e9079e8"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_fb1c_{{checksum ".buildcache/cache-keys/copy-source-fb1c770597213780c893e8d1b72b485d8344309c"}}
          - cache002-warm-go-build-vendor-cache_5604_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-56048779df04c678fc1cea7a13b693c666c952a2"}}
          - cache002-build-static-assets_789e_{{checksum ".buildcache/cache-keys/build-static-assets-789e53ff216ae925d44e9b5274bb7d805ba14aad"}}
          - cache002-build-ui_9d72_{{checksum ".buildcache/cache-keys/build-ui-9d726348bf94288702b8cd7b95d1c1691a0262db"}}
          - cache002-ui-dependencies_61c2_{{checksum ".buildcache/cache-keys/ui-dependencies-61c297802275b5ec73f8ea5eb856a4cdafa320d2"}}
          - cache002-install-yarn_b50a_{{checksum ".buildcache/cache-keys/install-yarn-b50a685dda6f0024fdc1d3c932145249388607ff"}}
          - cache002-set-workdir_832a_{{checksum ".buildcache/cache-keys/set-workdir-832ab6db015e60d34809bd961bef0600b57bc146"}}
          - cache002-install-go-tools_a227_{{checksum ".buildcache/cache-keys/install-go-tools-a22777d3f0b5a64a5813f3caf9e0f4573723f284"}}
          - cache002-install-go_e7d1_{{checksum ".buildcache/cache-keys/install-go-e7d10501046b915e20453987cea6c963e09ee189"}}
          - cache002-base_ab0c_{{checksum ".buildcache/cache-keys/base-ab0cae2c151b9aaa085c91b4da049ce7e8f9fbfc"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-ac93fcf961f9c7a47b51e95e2180c3472e9079e8-{{checksum ".buildcache/cache-keys/package-ac93fcf961f9c7a47b51e95e2180c3472e9079e8"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-56048779df04c678fc1cea7a13b693c666c952a2.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-56048779df04c678fc1cea7a13b693c666c952a2-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_5604_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-56048779df04c678fc1cea7a13b693c666c952a2"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-56048779df04c678fc1cea7a13b693c666c952a2.tar.gz

  windows_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 0db756c5a7085138a91fc4f1704c096ac032c0e9
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache002-package-0db756c5a7085138a91fc4f1704c096ac032c0e9-{{checksum ".buildcache/cache-keys/package-0db756c5a7085138a91fc4f1704c096ac032c0e9"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache002-copy-source_aeac_{{checksum ".buildcache/cache-keys/copy-source-aeac2a1342b45f9c925adcf06365f346de89f1c5"}}
          - cache002-warm-go-build-vendor-cache_85b3_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-85b39d446d1ac182059e92b1617ed4d7904d8aba"}}
          - cache002-build-static-assets_789e_{{checksum ".buildcache/cache-keys/build-static-assets-789e53ff216ae925d44e9b5274bb7d805ba14aad"}}
          - cache002-build-ui_9d72_{{checksum ".buildcache/cache-keys/build-ui-9d726348bf94288702b8cd7b95d1c1691a0262db"}}
          - cache002-ui-dependencies_61c2_{{checksum ".buildcache/cache-keys/ui-dependencies-61c297802275b5ec73f8ea5eb856a4cdafa320d2"}}
          - cache002-install-yarn_b50a_{{checksum ".buildcache/cache-keys/install-yarn-b50a685dda6f0024fdc1d3c932145249388607ff"}}
          - cache002-set-workdir_832a_{{checksum ".buildcache/cache-keys/set-workdir-832ab6db015e60d34809bd961bef0600b57bc146"}}
          - cache002-install-go-tools_a227_{{checksum ".buildcache/cache-keys/install-go-tools-a22777d3f0b5a64a5813f3caf9e0f4573723f284"}}
          - cache002-install-go_e7d1_{{checksum ".buildcache/cache-keys/install-go-e7d10501046b915e20453987cea6c963e09ee189"}}
          - cache002-base_ab0c_{{checksum ".buildcache/cache-keys/base-ab0cae2c151b9aaa085c91b4da049ce7e8f9fbfc"}}
      - run: make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache002-package-0db756c5a7085138a91fc4f1704c096ac032c0e9-{{checksum ".buildcache/cache-keys/package-0db756c5a7085138a91fc4f1704c096ac032c0e9"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-85b39d446d1ac182059e92b1617ed4d7904d8aba.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-85b39d446d1ac182059e92b1617ed4d7904d8aba-save
      - save_cache:
          key: 'cache002-warm-go-build-vendor-cache_85b3_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-85b39d446d1ac182059e92b1617ed4d7904d8aba"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-85b39d446d1ac182059e92b1617ed4d7904d8aba.tar.gz


  bundle-releases:
    executor: releaser
    steps:
      - checkout
      - write-all-package-cache-keys
      - load-darwin_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 0e7df7c9415da08a0e0636811984e735ab18639b
          name: Write package metadata for darwin_386_package
          command: |
            make package-meta
      - load-darwin_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 8e5ad3f1624a113a1e6c79f0db6ca072deec90a5
          name: Write package metadata for darwin_amd64_package
          command: |
            make package-meta
      - load-freebsd_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: d5ae261dbd8314d64f1d032aff64d2853b330080
          name: Write package metadata for freebsd_386_package
          command: |
            make package-meta
      - load-freebsd_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: f755a2a6236aed91360d154c3364bd48d82fe0c9
          name: Write package metadata for freebsd_amd64_package
          command: |
            make package-meta
      - load-freebsd_arm_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 31a0414980806ba9aa2b4f8c7f5fafca80424a95
          name: Write package metadata for freebsd_arm_package
          command: |
            make package-meta
      - load-linux_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: ab3b406eb95366c4c31d23d114c4b7a2d5255ebb
          name: Write package metadata for linux_386_package
          command: |
            make package-meta
      - load-linux_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: f607d155348098f48a428e52b8452e15dacc56a5
          name: Write package metadata for linux_amd64_package
          command: |
            make package-meta
      - load-linux_arm_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 55f686b7c66da028a38fafe00354eb57563614e0
          name: Write package metadata for linux_arm_package
          command: |
            make package-meta
      - load-linux_arm64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 9b548487cd3c87aac7d9e0fdc08e7fc710ddfd45
          name: Write package metadata for linux_arm64_package
          command: |
            make package-meta
      - load-netbsd_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 3deea94b77c38d6a9ac72eee8de3eca79c4d9f92
          name: Write package metadata for netbsd_386_package
          command: |
            make package-meta
      - load-netbsd_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 4f4fecfe8a68b73376e6c9853606c1118135cd60
          name: Write package metadata for netbsd_amd64_package
          command: |
            make package-meta
      - load-openbsd_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: dd3806d8cd7ec77fc9a2c29c9a59ea82537a05d2
          name: Write package metadata for openbsd_386_package
          command: |
            make package-meta
      - load-openbsd_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: ea8ce018d2eef1660313b10d96ce099e01846630
          name: Write package metadata for openbsd_amd64_package
          command: |
            make package-meta
      - load-solaris_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 8e2e38d11073cf97fb9a1e393ac44d7f461b411f
          name: Write package metadata for solaris_amd64_package
          command: |
            make package-meta
      - load-windows_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: ac93fcf961f9c7a47b51e95e2180c3472e9079e8
          name: Write package metadata for windows_386_package
          command: |
            make package-meta
      - load-windows_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 0db756c5a7085138a91fc4f1704c096ac032c0e9
          name: Write package metadata for windows_amd64_package
          command: |
            make package-meta
      - run:
          name: Write package aliases
          command:
            make aliases
      - run:
          name: List Build Cache
          command: ls -lahR .buildcache

      # Surface the package store directory as an artifact.
      # This makes each zipped package separately downloadable.
      - store_artifacts:
          path: .buildcache/packages
          destination: packages-standalone

      # Surface a tarball of the whole package store as an artifact.
      - run: tar -czf packages-standalone.tar.gz .buildcache/packages
      - store_artifacts:
          path: packages-standalone.tar.gz
          destination: packages-standalone.tar.gz

      # Surface a tarball of just the metadata files.
      - run: tar -czf meta-standalone.tar.gz .buildcache/packages/store/*.json
      - store_artifacts:
          path: meta-standalone.tar.gz
          destination: meta-standalone.tar.gz

commands:
  load-darwin_386_package:
    steps:
      - restore_cache:
          key: 'cache002-package-0e7df7c9415da08a0e0636811984e735ab18639b-{{checksum ".buildcache/cache-keys/package-0e7df7c9415da08a0e0636811984e735ab18639b"}}'
  
  load-darwin_amd64_package:
    steps:
      - restore_cache:
          key: 'cache002-package-8e5ad3f1624a113a1e6c79f0db6ca072deec90a5-{{checksum ".buildcache/cache-keys/package-8e5ad3f1624a113a1e6c79f0db6ca072deec90a5"}}'
  
  load-freebsd_386_package:
    steps:
      - restore_cache:
          key: 'cache002-package-d5ae261dbd8314d64f1d032aff64d2853b330080-{{checksum ".buildcache/cache-keys/package-d5ae261dbd8314d64f1d032aff64d2853b330080"}}'
  
  load-freebsd_amd64_package:
    steps:
      - restore_cache:
          key: 'cache002-package-f755a2a6236aed91360d154c3364bd48d82fe0c9-{{checksum ".buildcache/cache-keys/package-f755a2a6236aed91360d154c3364bd48d82fe0c9"}}'
  
  load-freebsd_arm_package:
    steps:
      - restore_cache:
          key: 'cache002-package-31a0414980806ba9aa2b4f8c7f5fafca80424a95-{{checksum ".buildcache/cache-keys/package-31a0414980806ba9aa2b4f8c7f5fafca80424a95"}}'
  
  load-linux_386_package:
    steps:
      - restore_cache:
          key: 'cache002-package-ab3b406eb95366c4c31d23d114c4b7a2d5255ebb-{{checksum ".buildcache/cache-keys/package-ab3b406eb95366c4c31d23d114c4b7a2d5255ebb"}}'
  
  load-linux_amd64_package:
    steps:
      - restore_cache:
          key: 'cache002-package-f607d155348098f48a428e52b8452e15dacc56a5-{{checksum ".buildcache/cache-keys/package-f607d155348098f48a428e52b8452e15dacc56a5"}}'
  
  load-linux_arm_package:
    steps:
      - restore_cache:
          key: 'cache002-package-55f686b7c66da028a38fafe00354eb57563614e0-{{checksum ".buildcache/cache-keys/package-55f686b7c66da028a38fafe00354eb57563614e0"}}'
  
  load-linux_arm64_package:
    steps:
      - restore_cache:
          key: 'cache002-package-9b548487cd3c87aac7d9e0fdc08e7fc710ddfd45-{{checksum ".buildcache/cache-keys/package-9b548487cd3c87aac7d9e0fdc08e7fc710ddfd45"}}'
  
  load-netbsd_386_package:
    steps:
      - restore_cache:
          key: 'cache002-package-3deea94b77c38d6a9ac72eee8de3eca79c4d9f92-{{checksum ".buildcache/cache-keys/package-3deea94b77c38d6a9ac72eee8de3eca79c4d9f92"}}'
  
  load-netbsd_amd64_package:
    steps:
      - restore_cache:
          key: 'cache002-package-4f4fecfe8a68b73376e6c9853606c1118135cd60-{{checksum ".buildcache/cache-keys/package-4f4fecfe8a68b73376e6c9853606c1118135cd60"}}'
  
  load-openbsd_386_package:
    steps:
      - restore_cache:
          key: 'cache002-package-dd3806d8cd7ec77fc9a2c29c9a59ea82537a05d2-{{checksum ".buildcache/cache-keys/package-dd3806d8cd7ec77fc9a2c29c9a59ea82537a05d2"}}'
  
  load-openbsd_amd64_package:
    steps:
      - restore_cache:
          key: 'cache002-package-ea8ce018d2eef1660313b10d96ce099e01846630-{{checksum ".buildcache/cache-keys/package-ea8ce018d2eef1660313b10d96ce099e01846630"}}'
  
  load-solaris_amd64_package:
    steps:
      - restore_cache:
          key: 'cache002-package-8e2e38d11073cf97fb9a1e393ac44d7f461b411f-{{checksum ".buildcache/cache-keys/package-8e2e38d11073cf97fb9a1e393ac44d7f461b411f"}}'
  
  load-windows_386_package:
    steps:
      - restore_cache:
          key: 'cache002-package-ac93fcf961f9c7a47b51e95e2180c3472e9079e8-{{checksum ".buildcache/cache-keys/package-ac93fcf961f9c7a47b51e95e2180c3472e9079e8"}}'
  
  load-windows_amd64_package:
    steps:
      - restore_cache:
          key: 'cache002-package-0db756c5a7085138a91fc4f1704c096ac032c0e9-{{checksum ".buildcache/cache-keys/package-0db756c5a7085138a91fc4f1704c096ac032c0e9"}}'
  

  write-build-layer-cache-keys:
    steps:
      - run:
          name: Write builder layer cache keys
          command: make -C packages*.lock write-builder-cache-keys

  write-package-cache-key:
    steps:
      - run:
          name: Write package cache key
          command: make -C packages*.lock write-package-cache-key

  write-all-package-cache-keys:
    steps:
      - run:
          name: Write package cache key
          command: make -C packages*.lock write-all-package-cache-keys
